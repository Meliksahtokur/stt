<WindowManager>:
    HomeScreen:
        name: 'home'

<HomeScreen@MDScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        MDTopAppBar:
            title: "Sürü Yönetimi"
            right_action_items: [["logout", lambda x: app.auth_manager.sign_out()]]

        MDBoxLayout:
            size_hint_y: None
            height: "48dp"
            padding: "10dp"
            MDTextField:
                id: search_field
                hint_text: "İsim veya küpe numarasına göre ara..."
                on_text: root.filter_list(self.text)

        RecycleView:
            id: animal_list
            view_class: 'AnimalItem'
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(10)
                padding: dp(10)
        MDBoxLayout:
            orientation: 'horizontal'
            adaptive_height: True
            pos_hint: {"center_x": 0.5, "y": 0}
            spacing: "10dp"
            padding: "10dp"
            size_hint_x: 0.9

            MDFloatingActionButton:
                icon: "plus"
                on_release: app.root.current = 'add_animal' # Navigate to add_animal screen
                pos_hint: {"center_x": 0.5}
            
            MDFloatingActionButton:
                icon: "upload" # Icon for file upload/web scraping
                on_release: app.root.current = 'file_upload' # Navigate to file_upload screen
                pos_hint: {"center_x": 0.5}

<AnimalItem@OneLineAvatarIconListItem>:
    on_release: app.root.current = 'animal_details'; app.root.get_screen('animal_details').set_animal_data(root.data)
    ImageLeftWidget:
        source: 'icon.png'

